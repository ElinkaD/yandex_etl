<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Bootcamp Stack UI</title>
  <style>
    :root {
      color-scheme: light;
      --bg: #f6f4ee;
      --panel: #fffdf8;
      --text: #1d1d1b;
      --accent: #1d6b57;
      --accent-soft: #d9efe7;
      --border: #d9d2c3;
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      background:
        radial-gradient(circle at top left, #f5d9b8 0, transparent 28%),
        radial-gradient(circle at bottom right, #cfe8df 0, transparent 32%),
        var(--bg);
      color: var(--text);
    }

    main {
      max-width: 820px;
      margin: 40px auto;
      padding: 32px 24px;
    }

    .hero {
      background: var(--panel);
      border: 1px solid var(--border);
      border-radius: 24px;
      padding: 28px;
      box-shadow: 0 12px 40px rgba(29, 29, 27, 0.08);
    }

    h1 {
      margin: 0 0 12px;
      font-size: clamp(32px, 5vw, 52px);
      line-height: 1;
    }

    p {
      margin: 0 0 24px;
      font-size: 18px;
      line-height: 1.5;
    }

    ul {
      list-style: none;
      padding: 0;
      margin: 0;
      display: grid;
      gap: 14px;
    }

    li {
      border: 1px solid var(--border);
      background: white;
      border-radius: 18px;
      padding: 16px 18px;
    }

    .row {
      display: flex;
      justify-content: space-between;
      gap: 12px;
      align-items: center;
      flex-wrap: wrap;
    }

    .meta {
      display: flex;
      gap: 10px;
      align-items: center;
      flex-wrap: wrap;
    }

    a {
      color: var(--accent);
      font-weight: 700;
      text-decoration: none;
    }

    a:hover { text-decoration: underline; }

    code {
      background: var(--accent-soft);
      border-radius: 999px;
      padding: 2px 8px;
      font-size: 14px;
    }

    button {
      border: 1px solid var(--border);
      background: var(--accent-soft);
      color: var(--text);
      border-radius: 999px;
      padding: 8px 12px;
      font: inherit;
      cursor: pointer;
    }

    button:hover {
      background: #c8e6db;
    }

    .details {
      margin-top: 14px;
      padding-top: 14px;
      border-top: 1px dashed var(--border);
      display: none;
    }

    .details.open {
      display: block;
    }

    .details dl {
      margin: 0;
      display: grid;
      grid-template-columns: max-content 1fr;
      gap: 8px 12px;
      font-size: 15px;
    }

    .details dt {
      font-weight: 700;
    }

    .hint {
      margin-top: 22px;
      font-size: 14px;
      color: #4f4b43;
    }

    @media (max-width: 640px) {
      .details dl {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <main>
    <section class="hero">
      <h1>Bootcamp Stack UI</h1>
      <p>Учебный стенд для Airflow, Spark, Kafka, ClickHouse, PostgreSQL и MinIO.</p>
      <ul id="links"></ul>
      <p class="hint">Для локального запуска используется <code>localhost</code>. На сервере ссылки и параметры автоматически подставляют текущий hostname страницы.</p>
    </section>
  </main>
  <script>
    const host = window.location.hostname;
    const services = [
      { label: "Airflow UI", port: 18080, creds: "admin / admin123" },
      { label: "Kafka UI", port: 18081 },
      { label: "MinIO Console", port: 19001, creds: "minio / minio12345" },
      { label: "Spark Master UI", port: 18088 },
      {
        label: "PostgreSQL",
        port: 15432,
        connection: {
          driver: "PostgreSQL",
          host,
          port: "15432",
          database: "airflow",
          user: "postgres",
          password: "postgres123",
          jdbc: `jdbc:postgresql://${host}:15432/airflow`,
        },
      },
      {
        label: "ClickHouse",
        port: 18123,
        connection: {
          driver: "ClickHouse",
          host,
          port: "18123",
          database: "default",
          user: "clickhouse",
          password: "clickhouse123",
          jdbc: `jdbc:clickhouse://${host}:18123/default`,
        },
      },
      {
        label: "Greenplum",
        port: 15433,
        connection: {
          driver: "PostgreSQL",
          host,
          port: "15433",
          database: "postgres",
          user: "gpadmin",
          password: "greenplum123",
          jdbc: `jdbc:postgresql://${host}:15433/postgres`,
        },
      },
    ];

    const links = document.getElementById("links");
    links.innerHTML = services
      .map(({ label, port, creds, connection }, index) => {
        const auth = creds ? `<code>${creds}</code>` : "";
        const button = connection
          ? `<button type="button" data-target="details-${index}">Показать подключение</button>`
          : "";
        const details = connection
          ? `
            <div class="details" id="details-${index}">
              <dl>
                <dt>Driver</dt><dd><code>${connection.driver}</code></dd>
                <dt>Host</dt><dd><code>${connection.host}</code></dd>
                <dt>Port</dt><dd><code>${connection.port}</code></dd>
                <dt>Database</dt><dd><code>${connection.database}</code></dd>
                <dt>User</dt><dd><code>${connection.user}</code></dd>
                <dt>Password</dt><dd><code>${connection.password}</code></dd>
                <dt>JDBC URL</dt><dd><code>${connection.jdbc}</code></dd>
              </dl>
            </div>
          `
          : "";

        return `
          <li>
            <div class="row">
              <div class="meta">
                <a href="http://${host}:${port}" target="_blank" rel="noreferrer">${label}</a>
                ${auth}
              </div>
              ${button}
            </div>
            ${details}
          </li>
        `;
      })
      .join("");

    links.addEventListener("click", (event) => {
      const button = event.target.closest("button[data-target]");
      if (!button) {
        return;
      }

      const details = document.getElementById(button.dataset.target);
      const isOpen = details.classList.toggle("open");
      button.textContent = isOpen ? "Скрыть подключение" : "Показать подключение";
    });
  </script>
</body>
</html>
